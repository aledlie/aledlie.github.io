# varLib

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareSourceCode",
  "name": "varLib",
  "description": "Directory containing 22 code files with 47 classes and 234 functions",
  "programmingLanguage": [
    {
      "@type": "ComputerLanguage",
      "name": "Python"
    }
  ],
  "featureList": [
    "47 class definitions",
    "234 function definitions"
  ]
}
</script>

## Overview

This directory contains 22 code file(s) with extracted schemas.

## Subdirectories

- `instancer/`

## Files and Schemas

### `__init__.py` (python)

**Classes:**
- `MasterFinder` (extends: object) - Line 1317
  - Methods: __init__, __call__

**Functions:**
- `_add_fvar(font, axes, instances)` - Line 70
- `_add_avar(font, axes, mappings, axisTags)` - Line 163
- `_add_stat(font)` - Line 303
- `_add_gvar(font, masterModel, master_ttfs, tolerance, optimize)` - Line 321
- `_remove_TTHinting(font)` - Line 403
- `_merge_TTHinting(font, masterModel, master_ttfs)` - Line 422
- `_add_HVAR(font, masterModel, master_ttfs, axisTags)` - Line 526
- `_add_VVAR(font, masterModel, master_ttfs, axisTags)` - Line 533
- `_add_VHVAR(font, axisTags, tableFields, getAdvanceMetrics)` - Line 540
- `_get_advance_metrics(font, masterModel, master_ttfs, axisTags, tableFields)` - Line 631
- ... and 16 more functions

**Key Imports:** `argparse`, `cff`, `collections`, `copy`, `doctest` (+33 more)

### `avar.py` (python)

**Functions:**
- `_denormalize(v, axis)` - Line 12
- `_pruneLocations(locations, poles, axisTags)` - Line 19
- `mappings_from_avar(font, denormalize)` - Line 82
- `main(args)` - Line 185

**Key Imports:** `argparse`, `fontTools`, `fontTools.designspaceLib`, `fontTools.misc.cliTools`, `fontTools.misc.fixedTools` (+8 more)

### `avarPlanner.py` (python)

**Functions:**
- `normalizeLinear(value, rangeMin, rangeMax)` - Line 108
- `interpolateLinear(t, a, b)` - Line 113
- `normalizeLog(value, rangeMin, rangeMax)` - Line 118
- `interpolateLog(t, a, b)` - Line 125
- `normalizeDegrees(value, rangeMin, rangeMax)` - Line 132
- `measureWeight(glyphset, glyphs)` - Line 139
- `measureWidth(glyphset, glyphs)` - Line 167
- `measureSlant(glyphset, glyphs)` - Line 195
- `sanitizeWidth(userTriple, designTriple, pins, measurements)` - Line 224
- `sanitizeWeight(userTriple, designTriple, pins, measurements)` - Line 265
- ... and 10 more functions

**Key Imports:** `argparse`, `fontTools`, `fontTools.misc.cliTools`, `fontTools.pens.areaPen`, `fontTools.pens.basePen` (+9 more)

### `builder.py` (python)

**Functions:**
- `buildVarRegionAxis(axisSupport)` - Line 7
- `buildSparseVarRegionAxis(axisIndex, axisSupport)` - Line 13
- `buildVarRegion(support, axisTags)` - Line 20
- `buildSparseVarRegion(support, axisTags)` - Line 33
- `buildVarRegionList(supports, axisTags)` - Line 51
- `buildSparseVarRegionList(supports, axisTags)` - Line 61
- `_reorderItem(lst, mapping)` - Line 71
- `VarData_calculateNumShorts(self, optimize)` - Line 75
- `VarData_CalculateNumShorts(self, optimize)` - Line 131
- `VarData_optimize(self)` - Line 138
- ... and 7 more functions

**Key Imports:** `fontTools`, `fontTools.ttLib.tables`

### `cff.py` (python)

**Classes:**
- `CFFToCFF2OutlineExtractor` (extends: T2OutlineExtractor) - Line 387
  - This class is used to remove the initial width from the CFF
  - Methods: popallWidth
- `MergeOutlineExtractor` (extends: CFFToCFF2OutlineExtractor) - Line 402
  - Used to extract the charstring commands - including hints - from a
  - Methods: __init__, countHints, _hint_op, op_hstem, op_vstem (+5 more)
- `CFF2CharStringMergePen` (extends: T2CharStringPen) - Line 465
  - Pen to merge Type 2 CharStrings.
  - Methods: __init__, add_point, add_hint, add_hintmask, _moveTo (+8 more)

**Functions:**
- `addCFFVarStore(varFont, varModel, varDataList, masterSupports)` - Line 38
- `convertCFFtoCFF2(varFont)` - Line 54
- `conv_to_int(num)` - Line 60
- `get_private(regionFDArrays, fd_index, ri, fd_map)` - Line 81
- `merge_PrivateDicts(top_dicts, vsindex_dict, var_model, fd_map)` - Line 92
- `_cff_or_cff2(font)` - Line 208
- `getfd_map(varFont, fonts_list)` - Line 214
- `merge_region_fonts(varFont, model, ordered_fonts_list, glyphOrder)` - Line 260
- `_get_cs(charstrings, glyphName, filterEmpty)` - Line 272
- `_add_new_vsindex(model, key, masterSupports, vsindex_dict, vsindex_by_key, varDataList)` - Line 291
- ... and 1 more functions

**Key Imports:** `collections`, `errors`, `fontTools`, `fontTools.cffLib`, `fontTools.cffLib.CFFToCFF2` (+9 more)

### `errors.py` (python)

**Classes:**
- `VarLibError` (extends: Exception) - Line 4
  - Base exception for the varLib module.
- `VarLibValidationError` (extends: VarLibError) - Line 8
  - Raised when input data is invalid from varLib's point of view.
- `VarLibMergeError` (extends: VarLibError) - Line 12
  - Raised when input data cannot be merged into a variable font.
  - Methods: __init__, reason, _master_name, offender, details (+1 more)
- `ShouldBeConstant` (extends: VarLibMergeError) - Line 73
  - some values were different, but should have been the same
  - Methods: details
- `FoundANone` (extends: VarLibMergeError) - Line 109
  - one of the values in a list was empty when it shouldn't have been
  - Methods: offender, details
- `NotANone` (extends: VarLibMergeError) - Line 123
  - one of the values in a list was not empty when it should have been
  - Methods: offender, details
- `MismatchedTypes` (extends: VarLibMergeError) - Line 137
  - data had inconsistent types
- `LengthsDiffer` (extends: VarLibMergeError) - Line 141
  - a list of objects had inconsistent lengths
- `KeysDiffer` (extends: VarLibMergeError) - Line 145
  - a list of objects had different keys
- `InconsistentGlyphOrder` (extends: VarLibMergeError) - Line 149
  - the glyph order was inconsistent between masters
- `InconsistentExtensions` (extends: VarLibMergeError) - Line 153
  - the masters use extension lookups in inconsistent ways
- `UnsupportedFormat` (extends: VarLibMergeError) - Line 157
  - an OpenType subtable (%s) had a format I didn't expect
  - Methods: __init__, reason
- `InconsistentFormats` (extends: UnsupportedFormat) - Line 173
  - an OpenType subtable (%s) had inconsistent formats between masters
- `VarLibCFFMergeError` (extends: VarLibError) - Line 177
- `VarLibCFFDictMergeError` (extends: VarLibCFFMergeError) - Line 181
  - Raised when a CFF PrivateDict cannot be merged.
  - Methods: __init__
- `VarLibCFFPointTypeMergeError` (extends: VarLibCFFMergeError) - Line 194
  - Raised when a CFF glyph cannot be merged because of point type differences.
  - Methods: __init__
- `VarLibCFFHintTypeMergeError` (extends: VarLibCFFMergeError) - Line 206
  - Raised when a CFF glyph cannot be merged because of hint type differences.
  - Methods: __init__
- `VariationModelError` (extends: VarLibError) - Line 218
  - Raised when a variation model is faulty.

**Key Imports:** `textwrap`

### `featureVars.py` (python)

**Classes:**
- `ShifterVisitor` (extends: TTVisitor) - Line 539
  - Methods: __init__

**Functions:**
- `addFeatureVariations(font, conditionalSubstitutions, featureTag)` - Line 18
- `_existingVariableFeatures(table)` - Line 107
- `_checkSubstitutionGlyphsExist(glyphNames, substitutions)` - Line 117
- `overlayFeatureVariations(conditionalSubstitutions)` - Line 130
- `overlayBox(top, bot)` - Line 255
- `cleanupBox(box)` - Line 340
- `addFeatureVariationsRaw(font, table, conditionalSubstitutions, featureTag)` - Line 359
- `buildGSUB()` - Line 490
- `makeSubstitutionsHashable(conditionalSubstitutions)` - Line 523
- `visit(visitor, obj, attr, value)` - Line 545
- ... and 11 more functions

**Key Imports:** `collections`, `doctest`, `errors`, `fontTools.misc.dictTools`, `fontTools.misc.intTools` (+5 more)

### `hvar.py` (python)

**Functions:**
- `_get_advance_metrics(font, axisTags, tableFields)` - Line 15
- `add_HVAR(font)` - Line 48
- `add_VVAR(font)` - Line 56
- `main(args)` - Line 64

**Key Imports:** `argparse`, `fontTools`, `fontTools.designspaceLib`, `fontTools.misc.cliTools`, `fontTools.misc.fixedTools` (+8 more)

### `interpolatable.py` (python)

**Classes:**
- `Glyph` - Line 39
  - Methods: __init__, _fill_in, _populate, draw

**Functions:**
- `test_gen(glyphsets, glyphs, names, ignore_missing)` - Line 127
- `test()` - Line 586
- `recursivelyAddGlyph(glyphname, glyphset, ttGlyphSet, glyf)` - Line 593
- `ensure_parent_dir(path)` - Line 602
- `main(args)` - Line 609

**Key Imports:** `argparse`, `base64`, `collections`, `fontTools`, `fontTools.designspaceLib` (+23 more)

### `interpolatableHelpers.py` (python)

**Classes:**
- `InterpolatableProblem` - Line 16
- `PerContourPen` (extends: BasePen) - Line 66
  - Methods: __init__, _moveTo, _lineTo, _qCurveToOne, _curveToOne (+3 more)
- `PerContourOrComponentPen` (extends: PerContourPen) - Line 100
  - Methods: addComponent
- `SimpleRecordingPointPen` (extends: AbstractPointPen) - Line 106
  - Methods: __init__, beginPath, endPath, addPoint

**Functions:**
- `sort_problems(problems)` - Line 44
- `rot_list(l, k)` - Line 60
- `vdiff_hypot2(v0, v1)` - Line 120
- `vdiff_hypot2_complex(v0, v1)` - Line 128
- `matching_cost(G, matching)` - Line 138
- `min_cost_perfect_bipartite_matching_scipy(G)` - Line 142
- `min_cost_perfect_bipartite_matching_munkres(G)` - Line 152
- `min_cost_perfect_bipartite_matching_bruteforce(G)` - Line 160
- `contour_vector_from_stats(stats)` - Line 194
- `matching_for_vectors(m0, m1)` - Line 209
- ... and 5 more functions

**Key Imports:** `collections`, `enum`, `fontTools.misc.transform`, `fontTools.pens.basePen`, `fontTools.pens.pointPen` (+8 more)

### `interpolatablePlot.py` (python)

**Classes:**
- `OverridingDict` (extends: dict) - Line 31
  - Methods: __init__, __missing__
- `InterpolatablePlot` - Line 39
  - Methods: __init__, __enter__, __exit__, show_page, add_title_page (+15 more)
- `InterpolatablePostscriptLike` (extends: InterpolatablePlot) - Line 1229
  - Methods: __exit__, show_page
- `InterpolatablePS` (extends: InterpolatablePostscriptLike) - Line 1238
  - Methods: __enter__
- `InterpolatablePDF` (extends: InterpolatablePostscriptLike) - Line 1244
  - Methods: __enter__
- `InterpolatableSVG` (extends: InterpolatablePlot) - Line 1254
  - Methods: __enter__, __exit__, show_page

**Key Imports:** `cairo`, `fontTools.pens.boundsPen`, `fontTools.pens.cairoPen`, `fontTools.pens.pointPen`, `fontTools.pens.recordingPen` (+12 more)

### `interpolatableTestContourOrder.py` (python)

**Functions:**
- `test_contour_order(glyph0, glyph1)` - Line 7

**Key Imports:** `interpolatableHelpers`, `logging`

### `interpolatableTestStartingPoint.py` (python)

**Functions:**
- `test_starting_point(glyph0, glyph1, ix, tolerance, matching)` - Line 4

**Key Imports:** `interpolatableHelpers`

### `interpolate_layout.py` (python)

**Functions:**
- `interpolate_layout(designspace, loc, master_finder, mapped)` - Line 16
- `main(args)` - Line 62

**Key Imports:** `argparse`, `copy`, `doctest`, `fontTools`, `fontTools.designspaceLib` (+7 more)

### `iup.py` (python)

**Functions:**
- `iup_segment(coords, rc1, rd1, rc2, rd2)` - Line 40
- `iup_contour(deltas, coords) -> _DeltaSegment` - Line 91
- `iup_delta(deltas, coords, ends) -> _DeltaSegment` - Line 143
- `can_iup_in_between(deltas, coords, i, j, tolerance)` - Line 181
- `_iup_contour_bound_forced_set(deltas, coords, tolerance) -> set` - Line 212
- `_iup_contour_optimize_dp(deltas, coords, forced, tolerance, lookback)` - Line 302
- `_rot_list(l, k)` - Line 346
- `_rot_set(s, k, n)` - Line 356
- `iup_contour_optimize(deltas, coords, tolerance) -> _DeltaOrNoneSegment` - Line 363
- `iup_delta_optimize(deltas, coords, ends, tolerance) -> _DeltaOrNoneSegment` - Line 464

**Key Imports:** `cython`, `fontTools.misc`, `numbers`, `typing`

### `merger.py` (python)

**Classes:**
- `Merger` (extends: object) - Line 46
  - Methods: __init__, merger, mergersFor, mergeObjects, mergeLists (+2 more)
- `AligningMerger` (extends: Merger) - Line 166
- `InstancerMerger` (extends: AligningMerger) - Line 1055
  - A merger that takes multiple master fonts, and instantiates
  - Methods: __init__
- `MutatorMerger` (extends: AligningMerger) - Line 1118
  - A merger that takes a variable font, and instantiates
  - Methods: __init__
- `VariationMerger` (extends: AligningMerger) - Line 1214
  - A merger that takes multiple master fonts, and builds a
  - Methods: __init__, setModel, mergeThings
- `COLRVariationMerger` (extends: VariationMerger) - Line 1318
  - A specialized VariationMerger that takes multiple master fonts containing
  - Methods: __init__, mergeTables, checkFormatEnum, mergeSparseDict, mergeAttrs (+5 more)

**Functions:**
- `merge(merger, self, lst)` - Line 171
- `_SinglePosUpgradeToFormat2(self)` - Line 196
- `_merge_GlyphOrders(font, lst, values_lst, default)` - Line 210
- `merge(merger, self, lst)` - Line 248
- `merge(merger, self, lst)` - Line 256
- `_Lookup_SinglePos_get_effective_value(merger, subtables, glyph)` - Line 263
- `_Lookup_PairPos_get_effective_value_pair(merger, subtables, firstGlyph, secondGlyph)` - Line 281
- `merge(merger, self, lst)` - Line 309
- `merge(merger, self, lst)` - Line 371
- `_PairPosFormat1_merge(self, lst, merger)` - Line 424
- ... and 35 more functions

**Key Imports:** `copy`, `enum`, `errors`, `fontTools.colorLib.builder`, `fontTools.misc` (+15 more)

### `models.py` (python)

**Classes:**
- `VariationModel` (extends: object) - Line 209
  - Locations must have the base master at the origin (ie. 0).
  - Methods: __init__, getSubModel, computeAxisRanges, getMasterLocationsSortKeyFunc, reorderMasters (+12 more)

**Functions:**
- `nonNone(lst)` - Line 15
- `allNone(lst)` - Line 19
- `allEqualTo(ref, lst, mapper)` - Line 23
- `allEqual(lst, mapper)` - Line 31
- `subList(truth, lst)` - Line 42
- `normalizeValue(v, triple, extrapolate)` - Line 47
- `normalizeLocation(location, axes, extrapolate)` - Line 78
- `supportScalar(location, support, ot, extrapolate, axisRanges)` - Line 128
- `piecewiseLinearMap(v, mapping)` - Line 560
- `main(args)` - Line 580

**Key Imports:** `argparse`, `doctest`, `errors`, `fontTools`, `fontTools.designspaceLib` (+3 more)

### `multiVarStore.py` (python)

**Classes:**
- `OnlineMultiVarStoreBuilder` (extends: object) - Line 28
  - Methods: __init__, setModel, setSupports, finish, _add_MultiVarData (+2 more)
- `MultiVarStoreInstancer` (extends: object) - Line 158
  - Methods: __init__, setLocation, _clearCaches, _getScalar, interpolateFromDeltasAndScalars (+2 more)

**Functions:**
- `_getLocationKey(loc)` - Line 24
- `MultiVarData_addItem(self, deltas)` - Line 125
- `SparseVarRegion_get_support(self, fvar_axes)` - Line 141
- `MultiVarStore___bool__(self)` - Line 151
- `MultiVarStore_subset_varidxes(self, varIdxes)` - Line 211
- `MultiVarStore_prune_regions(self)` - Line 215
- `MultiVarStore_get_supports(self, major, fvarAxes)` - Line 225
- `VARC_collect_varidxes(self, varidxes)` - Line 238
- `VARC_remap_varidxes(self, varidxes_map)` - Line 245

**Key Imports:** `collections`, `fontTools.misc.intTools`, `fontTools.misc.iterTools`, `fontTools.misc.roundTools`, `fontTools.misc.vector` (+6 more)

### `mutator.py` (python)

**Functions:**
- `interpolate_cff2_PrivateDict(topDict, interpolateFromDeltas)` - Line 51
- `interpolate_cff2_charstrings(topDict, interpolateFromDeltas, glyphOrder)` - Line 80
- `interpolate_cff2_metrics(varfont, topDict, glyphOrder, loc)` - Line 122
- `instantiateVariableFont(varfont, location, inplace, overlap)` - Line 173
- `main(args)` - Line 448

**Key Imports:** `argparse`, `doctest`, `fontTools`, `fontTools.misc.fixedTools`, `fontTools.misc.loggingTools` (+15 more)

### `plot.py` (python)

**Functions:**
- `stops(support, count)` - Line 15
- `_plotLocationsDots(locations, axes, subplot)` - Line 25
- `plotLocations(locations, fig, names)` - Line 42
- `_plotLocations2D(model, axis, fig, cols, rows, names)` - Line 62
- `_plotLocations3D(model, axes, fig, rows, cols, names)` - Line 83
- `plotDocument(doc, fig)` - Line 119
- `_plotModelFromMasters2D(model, masterValues, fig)` - Line 126
- `_plotModelFromMasters3D(model, masterValues, fig)` - Line 147
- `plotModelFromMasters(model, masterValues, fig)` - Line 176
- `main(args)` - Line 188

**Key Imports:** `fontTools`, `fontTools.designspaceLib`, `fontTools.varLib.models`, `itertools`, `logging` (+5 more)

### `stat.py` (python)

**Functions:**
- `buildVFStatTable(ttFont, doc, vfName) -> <ast.Constant object at 0x106239690>` - Line 18
- `getStatAxes(doc, userRegion) -> List[...]` - Line 57
- `getStatLocations(doc, userRegion) -> List[...]` - Line 91
- `_labelToFlags(label) -> int` - Line 114
- `_axisLabelToStatLocation(label) -> Dict` - Line 123

**Key Imports:** `__future__`, `fontTools.designspaceLib`, `fontTools.designspaceLib.types`, `fontTools.otlLib.builder`, `fontTools.ttLib` (+1 more)

### `varStore.py` (python)

**Classes:**
- `OnlineVarStoreBuilder` (extends: object) - Line 24
  - Methods: __init__, setModel, setSupports, finish, _add_VarData (+4 more)
- `VarStoreInstancer` (extends: object) - Line 194
  - Methods: __init__, setLocation, _clearCaches, _getScalar, interpolateFromDeltasAndScalars (+2 more)
- `_Encoding` (extends: object) - Line 401
  - Methods: __init__, append, extend, width_sort_key, _characteristic_overhead (+2 more)
- `_EncodingDict` (extends: dict) - Line 452
  - Methods: __missing__, add_row, _row_characteristics

**Functions:**
- `_getLocationKey(loc)` - Line 20
- `VarData_addItem(self, deltas)` - Line 159
- `VarRegion_get_support(self, fvar_axes)` - Line 176
- `VarStore___bool__(self)` - Line 187
- `VarStore_subset_varidxes(self, varIdxes, optimize, retainFirstMap, advIdxes)` - Line 248
- `VarStore_prune_regions(self)` - Line 316
- `_visit(self, func)` - Line 344
- `_Device_recordVarIdx(self, s)` - Line 366
- `Object_collect_device_varidxes(self, varidxes)` - Line 372
- `_Device_mapVarIdx(self, mapping, done)` - Line 381
- ... and 3 more functions

**Key Imports:** `argparse`, `collections`, `doctest`, `fontTools`, `fontTools.misc.intTools` (+9 more)

---
*Generated by Enhanced Schema Generator with schema.org markup*