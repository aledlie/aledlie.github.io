@use "sass:color";
@use "sass:math";
@use 'variables' as *;

/* ==========================================================================
   Utility mixins
   ========================================================================== */

/* 
   Clearfix
   For clearing floats like a boss h5bp.com/q
   ========================================================================== */

@mixin clearfix {
  &::before,
  &::after {
    display: table;
    content: "";
    line-height: 0;
  }
  &::after {
    clear: both;
  }
}

/* 
   Webkit-style focus
   ========================================================================== */

@mixin tab-focus() {
  outline: thin dotted #333;
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}

/* 
   Center-align a block level element
   ========================================================================== */

@mixin center-block() {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

/* ==========================================================================
   Typography related mixins
   ========================================================================== */

/* 
   Maintains vertical rhythm by setting a font-sizes proportional to
   line-height and bottom margin
   example: @include font-size(16);
   ========================================================================== */

@mixin font-size($size) {
  font-size: #{$size}px;
  font-size: #{math.div($size, $doc-font-size)}rem;
  line-height: math.div(math.round(math.div($doc-line-height, $size)*10000), 10000);
  margin-bottom: #{$doc-line-height}px;
  margin-bottom: #{math.div($doc-line-height, $doc-font-size)}rem;
}

/* 
   Just font-size (REMs + pixel fallback)
   example: @include font-rem(16);
   ========================================================================== */

@mixin font-rem($size) {
  font-size: #{$size}px;
  font-size: #{math.div($size, $doc-font-size)}rem;
}

/* 
   Just font-size (REMs + pixel fallback) and line-height
   @include font(16);
   ========================================================================== */

@mixin font($size) {
  font-size: #{$size}px;
  font-size: #{math.div($size, $doc-font-size)}rem;
  line-height: math.div(math.round(math.div($doc-line-height, $size)*10000), 10000);
}

/* 
   Hide text overflow and end with ...
   ========================================================================== */

@mixin text-overflow() {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap; 
}

/* Indentation variable */
$indent-var: #{math.div($doc-line-height, $doc-font-size)}rem;

/* ==========================================================================
   Modern CSS Properties (vendor prefixes removed for modern browsers)
   ========================================================================== */

/* 
   Border radius
   example: @include rounded(4px);
   ========================================================================== */

@mixin rounded($radius: 4px) {
  border-radius: $radius; 
}

/* 
   Box shadow
   example: @include box-shadow(0 1px 3px rgba(0,0,0,.25));
   ========================================================================== */

@mixin box-shadow($shadow: 0 1px 3px rgba(0,0,0,.25)) {
  box-shadow: $shadow; 
}

/* 
   Text shadow
   example: @include text-shadow(0 2px 3px rgba(0,0,0,.25));
   ========================================================================== */

@mixin text-shadow($shadow: 0 2px 3px rgba(0,0,0,.25)) {
  text-shadow: $shadow;
}

/* 
   Opacity
   example: @include opacity(0.5); // 50% opacity
   ========================================================================== */

@mixin opacity($opacity: 0.5) {
  opacity: $opacity; 
}

/* ==========================================================================
   Transformations (modern syntax)
   ========================================================================== */

/* 
   @include rotate(45deg);
   ========================================================================== */

@mixin rotate($deg) {
  transform: rotate($deg); 
}

/* 
   @include scale(1.5);
   ========================================================================== */

@mixin scale($ratio) {
  transform: scale($ratio); 
}

/* 
   @include skew(10deg, 5deg);
   ========================================================================== */

@mixin skew($x: 0, $y: 0) {
  transform: skew($x, $y); 
}

/* 
   @include transition(all 0.3s ease);
   ========================================================================== */

@mixin transition($transition) {
  transition: $transition; 
}

/* 
   @include translate(10px, 20px);
   ========================================================================== */

@mixin translate($x: 0, $y: 0) {
  transform: translate($x, $y); 
}

@mixin translate3d($x: 0, $y: 0, $z: 0) {
  transform: translate3d($x, $y, $z); 
}

/* 
   Modern animation mixin
   ========================================================================== */

@mixin animation($name, $duration: 300ms, $delay: 0, $ease: ease) {
  animation: $name $duration $delay $ease;
}

/* ==========================================================================
   Background utilities
   ========================================================================== */

/* 
   @include background-alpha(#fff, 0.8);
   ========================================================================== */

@mixin background-alpha($color: $white, $alpha: 1) {
  background-color: hsla(color.hue($color), color.saturation($color), color.lightness($color), $alpha); 
}

/* 
   @include background-size(cover);
   ========================================================================== */

@mixin background-size($size) {
  background-size: $size; 
}

/* 
   Box-sizing (modern browsers support this natively)
   example: @include box-sizing(border-box);
   ========================================================================== */

@mixin box-sizing($boxsize: border-box) {
  box-sizing: $boxsize; 
}

/* ==========================================================================
   Utility mixins
   ========================================================================== */

@mixin hide-text() {
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden; 
}

@mixin hidden {
  display: none;
  visibility: hidden;
}

@mixin invisible() { 
  visibility: hidden; 
}

@mixin resize($direction: both) {
  resize: $direction;
  overflow: auto; 
}

@mixin visually-hidden() { 
  overflow: hidden; 
  position: absolute;
  clip: rect(0 0 0 0); 
  height: 1px; 
  width: 1px;
  margin: -1px; 
  padding: 0; 
  border: 0; 
}

/* ==========================================================================
   Modern Flexbox and Grid utilities
   ========================================================================== */

@mixin flex-center() {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between() {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* ==========================================================================
   Responsive breakpoint mixin
   ========================================================================== */

@mixin breakpoint($point) {
  @if $point == small {
    @media #{$small} { @content; }
  }
  @else if $point == medium {
    @media #{$medium} { @content; }
  }
  @else if $point == large {
    @media #{$large} { @content; }
  }
  @else if $point == x-large {
    @media #{$x-large} { @content; }
  }
  @else {
    @media #{$point} { @content; }
  }
}
